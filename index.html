<script>
function loadAnalisisData() {
  fetch(`${WEBAPP_URL}?action=getAllDashboardData&state=${loggedInUser.state}`)
    .then(r => r.json())
    .then(data => {
      console.log("DATA DITERIMA:", data);

      if (!Array.isArray(data) || data.length === 0) {
        alert("Tiada data DISAHKAN dalam spreadsheet");
        return;
      }

      document.querySelector(".container").innerHTML += `
        <pre style="background:#eee;padding:10px;">
${JSON.stringify(data, null, 2)}
        </pre>
      `;
    })
    .catch(err => {
      console.error(err);
      alert("Ralat sambungan API");
    });
}
</script>
